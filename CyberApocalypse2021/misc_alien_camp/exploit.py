from pwn import *

r = remote("188.166.172.13", 30496)

for i in range(4):
    r.recvline()

r.sendline("1")

r.recvline()
r.recvline()

l = str(r.recvline(), 'utf-8')
log.success(l)
l = l.replace(' -> ', ' ').split(' ')[:-1]

m = {}
for i in range(int(len(l)/2)):
    m[l[2*i]] = int(l[2*i + 1])

print(m)

for i in range(3):
    r.recvline()

r.sendline("2")
r.recvline()
r.recvline()
r.recvline()
for i in range(500):
    for j in range(2):
        r.recvline()

    s = str(r.recvuntil("\n"), "utf-8")[:-4]
    log.success(f"{i}: " + s)
    q = s
    r.recvline()

    for i in m.keys():
        q = q.replace(i, f"{m[i]}")

    ans = eval(q)
    log.success(f"{ans}")

    r.sendline(f"{ans}")
    r.recvline()
    r.recvline()
    r.recvline()

r.interactive()
